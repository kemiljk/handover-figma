<head>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>

<body style="display: none">
  <div class="container-top fixed mx-auto z-1 w-full pt-2 pb-4 px-4 border-b-2 border-gray-200">
    <div class="flex w-full mx-auto space-x-2">
      <div class="flex flex-col w-1/4">
        <h5 class="pb-2 font-bold text-xs">Base px</h5>
        <input class="w-full py-2 p-2 text-xs border-2  rounded-lg focus:outline-none" type="number" id="newPx"
          value="16">
      </div>
      <div class="flex flex-col w-3/4">
        <h5 class="pb-2 font-bold text-xs">Scale</h5>
        <div class="relative">
          <select name="conversionScale" id="scale"
            class="w-full py-2 px-2 text-xs border-2  rounded-lg  focus:outline-none">
            <option value="1.000" selected>Browser default (1.000)</option>
            <option value="1.067">Minor second (1.067)</option>
            <option value="1.125">Major second (1.125)</option>
            <option value="1.200">Minor third (1.200)</option>
            <option value="1.250">Major third (1.250)</option>
            <option value="1.333">Perfect fourth (1.333)</option>
            <option value="1.414">Augmented fourth (1.414)</option>
            <option value="1.500">Perfect fifth (1.500)</option>
            <option value="1.618">Golden ratio (1.618)</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div class="flex mx-auto w-full px-4 z-0 pt-24">
    <span class="component" id="component">Set
      selection</span>
  </div>
  <div class="overflow-y-auto pt-4">
    <div class="flex flex-col mx-auto w-full px-4 pb-24">
      <div class="flex w-full">
        <form id="resetPx" class="w-full space-y-2">
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">X position</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="xPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="xResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Y position</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="yPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="yResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Width</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="widthPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="widthResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Height</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="heightPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="heightResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Corner radius</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="radiusPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="radiusResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Item spacing</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="itemSpacingPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="itemSpacingResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Padding top</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="paddingTPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="paddingTResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Padding right</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="paddingRPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="paddingRResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Padding bottom</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="paddingBPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="paddingBResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Padding left</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="paddingLPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="paddingLResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Stroke weight</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="strokePx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="strokeResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Text</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="textPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="textResult" class="w-full leading-none font-bold font-mono">0.00</span><span
                class="w-max leading-none font-bold font-mono">rem</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Line-height</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="lineHeightPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="lineHeightResult" class="w-full leading-none font-bold font-mono">AUTO</span>
            </div>
          </div>
          <div class="flex w-full items-end justify-between">
            <div class="flex flex-col items-start justify-center">
              <h4 class="font-medium text-sm">Letter-spacing</h4>
              <div class="flex items-end space-x-2">
                <input type="number" class="w-20 py-2 p-2 text-sm font-medium border-2  rounded-lg focus:outline-none"
                  id="letterSpacingPx" value="0">
                <span class="px">px</span>
              </div>
            </div>
            <div class="flex">
              <span id="letterSpacingResult" class="w-full leading-none font-bold font-mono">AUTO</span>
            </div>
          </div>
        </form>
      </div>
      <div class=" container-bottom w-full fixed z-1 p-4 bottom-0 left-0 right-0 mx-auto flex justify-center">
        <div class="flex justify-center w-full space-x-4">
          <button id="convert"
            class="text-center text-sm font-bold py-2 px-4 w-fit rounded-lg focus:outline-none">Update
            conversion</button>
          <button id="reset"
            class="text-center text-sm font-bold py-2 px-4 w-fit rounded-lg focus:outline-none">Reset</button>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  document.addEventListener(
    "DOMContentLoaded",
    () => (document.body.style.display = "")
  );

  let resultArray = [];
  var textResult, lHResult, LSResult, wResult, hResult, rResult, sResult, xResult, yResult, pTResult, pBResult, pLResult, pRResult, iSResult

  onmessage = (event) => {
    if (event.data.pluginMessage.fontSize) {
      document.getElementById('textPx').value = event.data.pluginMessage.fontSize.toFixed(0);
    }
    if (event.data.pluginMessage.lineHeight) {
      document.getElementById('lineHeightPx').value = event.data.pluginMessage.lineHeight.toFixed(0);
    }
    if (event.data.pluginMessage.letterSpacing) {
      document.getElementById('letterSpacingPx').value = event.data.pluginMessage.letterSpacing.toFixed(0);
    }
    if (event.data.pluginMessage.width) {
      document.getElementById('widthPx').value = event.data.pluginMessage.width.toFixed(0);
    }
    if (event.data.pluginMessage.height) {
      document.getElementById('heightPx').value = event.data.pluginMessage.height.toFixed(0);
    }
    if (event.data.pluginMessage.cornerRadius) {
      document.getElementById('radiusPx').value = event.data.pluginMessage.cornerRadius.toFixed(0);
    }
    if (event.data.pluginMessage.strokeWeight) {
      document.getElementById('strokePx').value = event.data.pluginMessage.strokeWeight.toFixed(0);
    }
    if (event.data.pluginMessage.x) {
      document.getElementById('xPx').value = event.data.pluginMessage.x.toFixed(0);
    }
    if (event.data.pluginMessage.y) {
      document.getElementById('yPx').value = event.data.pluginMessage.y.toFixed(0);
    }
    if (event.data.pluginMessage.paddingTop) {
      document.getElementById('paddingTPx').value = event.data.pluginMessage.paddingTop.toFixed(0);
    }
    if (event.data.pluginMessage.paddingBottom) {
      document.getElementById('paddingBPx').value = event.data.pluginMessage.paddingBottom.toFixed(0);
    }
    if (event.data.pluginMessage.paddingLeft) {
      document.getElementById('paddingLPx').value = event.data.pluginMessage.paddingLeft.toFixed(0);
    }
    if (event.data.pluginMessage.paddingRight) {
      document.getElementById('paddingRPx').value = event.data.pluginMessage.paddingRight.toFixed(0);
    }
    if (event.data.pluginMessage.itemSpacing) {
      document.getElementById('itemSpacingPx').value = event.data.pluginMessage.itemSpacing.toFixed(0);
    }
    if (event.data.pluginMessage.component) {
      document.getElementById('component').innerHTML = event.data.pluginMessage.component;
      console.log(event.data.pluginMessage.component)
    }

    document.getElementById('convert').onclick = () => {
      const text = document.getElementById('textPx');
      var result = pxToRem(text.value);
      document.getElementById('textResult').innerHTML = (result().toFixed(2)
        || 0);


      const lineHeight = document.getElementById('lineHeightPx');
      var result = pxToRem(lineHeight.value);
      document.getElementById('lineHeightResult').innerHTML = (result().toFixed(2) || 0);

      const letterSpacing = document.getElementById('letterSpacingPx');
      var result = pxToRem(letterSpacing.value);
      document.getElementById('letterSpacingResult').innerHTML = (result().toFixed(2) || 0);

      const width = document.getElementById('widthPx');
      var result = pxToRem(width.value);
      document.getElementById('widthResult').innerHTML = (result().toFixed(2) || 0);

      const height = document.getElementById('heightPx');
      var result = pxToRem(height.value);
      document.getElementById('heightResult').innerHTML = (result().toFixed(2) || 0);

      const radius = document.getElementById('radiusPx');
      var result = pxToRem(radius.value);
      document.getElementById('radiusResult').innerHTML = (result().toFixed(2) || 0);

      const stroke = document.getElementById('strokePx');
      var result = pxToRem(stroke.value);
      document.getElementById('strokeResult').innerHTML = (result().toFixed(2) || 0);

      const x = document.getElementById('xPx');
      var result = pxToRem(x.value);
      document.getElementById('xResult').innerHTML = (result().toFixed(2) || 0);

      const y = document.getElementById('yPx');
      var result = pxToRem(y.value);
      document.getElementById('yResult').innerHTML = (result().toFixed(2) || 0);

      const paddingT = document.getElementById('paddingTPx');
      var result = pxToRem(paddingT.value);
      document.getElementById('paddingTResult').innerHTML = (result().toFixed(2) || 0);

      const paddingB = document.getElementById('paddingBPx');
      var result = pxToRem(paddingB.value);
      document.getElementById('paddingBResult').innerHTML = (result().toFixed(2) || 0);

      const paddingL = document.getElementById('paddingLPx');
      var result = pxToRem(paddingL.value);
      document.getElementById('paddingLResult').innerHTML = (result().toFixed(2) || 0);

      const paddingR = document.getElementById('paddingRPx');
      var result = pxToRem(paddingR.value);
      document.getElementById('paddingRResult').innerHTML = (result().toFixed(2) || 0);

      const itemSpacing = document.getElementById('itemSpacingPx');
      var result = pxToRem(itemSpacing.value);
      document.getElementById('itemSpacingResult').innerHTML = (result().toFixed(2) || 0);
    }

    const text = document.getElementById('textPx');
    textResult = pxToRem(text.value);
    document.getElementById('textResult').innerHTML = (textResult().toFixed(2)
      || 0);

    const lineHeight = document.getElementById('lineHeightPx');
    lHResult = pxToRem(lineHeight.value);
    document.getElementById('lineHeightResult').innerHTML = lHResult === "AUTO" ? "AUTO" : (lHResult().toFixed(2)
      || 0);

    const letterSpacing = document.getElementById('letterSpacingPx');
    LSResult = pxToRem(letterSpacing.value);
    document.getElementById('letterSpacingResult').innerHTML = (LSResult().toFixed(2)
      || 0);

    const width = document.getElementById('widthPx');
    wResult = pxToRem(width.value);
    document.getElementById('widthResult').innerHTML = (wResult().toFixed(2) || 0);

    const height = document.getElementById('heightPx');
    hResult = pxToRem(height.value);
    document.getElementById('heightResult').innerHTML = (hResult().toFixed(2) || 0);

    const radius = document.getElementById('radiusPx');
    rResult = pxToRem(radius.value);
    document.getElementById('radiusResult').innerHTML = (rResult().toFixed(2) || 0);

    const stroke = document.getElementById('strokePx');
    sResult = pxToRem(stroke.value);
    document.getElementById('strokeResult').innerHTML = (sResult().toFixed(2) || 0);

    const x = document.getElementById('xPx');
    xResult = pxToRem(x.value);
    document.getElementById('xResult').innerHTML = (xResult().toFixed(2) || 0);

    const y = document.getElementById('yPx');
    yResult = pxToRem(y.value);
    document.getElementById('yResult').innerHTML = (yResult().toFixed(2) || 0);

    const paddingT = document.getElementById('paddingTPx');
    pTResult = pxToRem(paddingT.value);
    document.getElementById('paddingTResult').innerHTML = (pTResult().toFixed(2) || 0);

    const paddingB = document.getElementById('paddingBPx');
    pBResult = pxToRem(paddingB.value);
    document.getElementById('paddingBResult').innerHTML = (pBResult().toFixed(2) || 0);

    const paddingL = document.getElementById('paddingLPx');
    pLResult = pxToRem(paddingL.value);
    document.getElementById('paddingLResult').innerHTML = (pLResult().toFixed(2) || 0);

    const paddingR = document.getElementById('paddingRPx');
    pRResult = pxToRem(paddingR.value);
    document.getElementById('paddingRResult').innerHTML = (pRResult().toFixed(2) || 0);

    const itemSpacing = document.getElementById('itemSpacingPx');
    iSResult = pxToRem(itemSpacing.value);
    document.getElementById('itemSpacingResult').innerHTML = (iSResult().toFixed(2) || 0);
  }

  document.getElementById('reset').onclick = () => {
    document.getElementById('resetPx').reset();
    document.getElementById('component').innerHTML = "Set selection"
    const idArray = [
      'textResult',
      'lineHeightResult',
      'letterSpacingResult',
      'widthResult',
      'heightResult',
      'radiusResult',
      'strokeResult',
      'xResult',
      'yResult',
      'paddingTResult',
      'paddingBResult',
      'paddingLResult',
      'paddingRResult',
      'itemSpacingResult'
    ]
    idArray.forEach((id) => {
      document.getElementById(id).innerHTML = 0.00.toFixed(2)
    })
  }

  function pxToRem(px) {
    var baseValue = document.getElementById('newPx').value;
    var scale = document.getElementById('scale').value;

    function calculate() {
      return (px / baseValue) * scale;
    }

    return calculate;
  }
</script>

<style>
  body {
    background-color: var(--figma-color-bg);
  }

  .container-top {
    background-color: var(--figma-color-bg);
    border-bottom: 1px solid var(--figma-color-border);
  }

  .container-bottom {
    background-color: var(--figma-color-bg);
    border-top: 1px solid var(--figma-color-border);
  }

  button {
    background-color: var(--figma-color-bg);
    border: 1px solid var(--figma-color-border);
    color: var(--figma-color-text);
    cursor: pointer;
    font-size: 1rem;
  }

  button:hover {
    background-color: var(--figma-color-bg-selected-hover);
    border: 1px solid var(--figma-color-border-selected);
  }

  h3 {
    color: var(--figma-color-text);
  }

  h4,
  h5 {
    color: var(--figma-color-text-secondary);
  }

  input {
    border: 2px solid var(--figma-color-border);
    background-color: var(--figma-color-bg);
    color: var(--figma-color-text);
  }

  input:active {
    border: 2px solid var(--figma-color-border-onsuccess);
  }

  input:focus {
    border: 2px solid var(--figma-color-border-onsuccess);
  }

  select {
    border: 2px solid var(--figma-color-border);
    background-color: var(--figma-color-bg);
    color: var(--figma-color-text);
  }

  select:active {
    border: 2px solid var(--figma-color-border-onsuccess);
  }

  select:focus {
    border: 2px solid var(--figma-color-border-onsuccess);
  }

  span {
    color: var(--figma-color-text-success);
  }

  span.px {
    color: var(--figma-color-text-secondary);
  }

  span.component {
    margin-top: 0.5rem;
    color: var(--figma-color-text-success);
    font-size: 0.8rem;
    border-radius: 999px;
    padding: 0.3rem 0.8rem;
    background-color: var(--figma-color-bg-success), 0.5;
    border: 1px solid var(--figma-color-border-onsuccess);
  }
</style>